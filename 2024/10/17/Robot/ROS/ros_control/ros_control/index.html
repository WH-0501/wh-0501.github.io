<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="由 PR2 改写而来的硬件封装库，负责统一管理硬件设备与底层细节，向上提供统一的接口（用户需继承 hardware_interface::RobotHW，实现并调用 read&#x2F;write 等方法）。包括控制器接口、控制器管理器、传输和硬件接口的包，可以帮助机器人应用快速落地，提高开发效率。    Controller Manager：管理不同的 controller Controller：可以实现">
<meta property="og:type" content="article">
<meta property="og:title" content="ros_control">
<meta property="og:url" content="http://example.com/2024/10/17/Robot/ROS/ros_control/ros_control/index.html">
<meta property="og:site_name" content="Daemo">
<meta property="og:description" content="由 PR2 改写而来的硬件封装库，负责统一管理硬件设备与底层细节，向上提供统一的接口（用户需继承 hardware_interface::RobotHW，实现并调用 read&#x2F;write 等方法）。包括控制器接口、控制器管理器、传输和硬件接口的包，可以帮助机器人应用快速落地，提高开发效率。    Controller Manager：管理不同的 controller Controller：可以实现">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-10-16T23:36:57.000Z">
<meta property="article:modified_time" content="2024-10-16T23:54:13.647Z">
<meta property="article:author" content="Damon">
<meta property="article:tag" content="ROS">
<meta property="article:tag" content="ros_control">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2024/10/17/Robot/ROS/ros_control/ros_control/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/10/17/Robot/ROS/ros_control/ros_control/","path":"2024/10/17/Robot/ROS/ros_control/ros_control/","title":"ros_control"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ros_control | Daemo</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Daemo</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">内诚于心，外信于人</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#hardware-interface"><span class="nav-number">1.</span> <span class="nav-text">hardware interface</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Transmission%EF%BC%88%E4%BC%A0%E5%8A%A8%E8%A3%85%E7%BD%AE%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">Transmission（传动装置）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E8%8A%82%E9%99%90%E5%88%B6"><span class="nav-number">3.</span> <span class="nav-text">关节限制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.</span> <span class="nav-text">示例</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Damon</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">130</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/10/17/Robot/ROS/ros_control/ros_control/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Damon">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daemo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ros_control | Daemo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ros_control
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-10-17 07:36:57 / 修改时间：07:54:13" itemprop="dateCreated datePublished" datetime="2024-10-17T07:36:57+08:00">2024-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Robot/" itemprop="url" rel="index"><span itemprop="name">Robot</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Robot/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Robot/ROS/ros-control/" itemprop="url" rel="index"><span itemprop="name">ros_control</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>由 PR2 改写而来的硬件封装库，负责统一管理硬件设备与底层细节，向上提供统一的接口（用户需继承 <code>hardware_interface::RobotHW</code>，实现并调用 <code>read/write</code> 等方法）。包括控制器接口、控制器管理器、传输和硬件接口的包，可以帮助机器人应用快速落地，提高开发效率。</p>


<ul>
<li>Controller Manager：管理不同的 controller</li>
<li>Controller：可以实现 joints 的控制，请求硬件资源，读取硬件资源接口中的状态，发布控制命令</li>
<li>Harware Resource：硬件资源</li>
<li>RobotHW：硬件抽象层，用户需继承该类，实现  方法，来实现机器人的操作</li>
<li>Real Robot：真实机器人硬件，接收并响应指令，反馈状态等</li>
</ul>
<p>使用 ros_control 能够复用 ros_controllers 中的控制算法，并且对 gazebo 支持良好。（gazebo 仿真时，自定义插件需继承自 <code>gazebo_ros_control::RobotHWSim</code>，该类实现了模拟 ros_control 中的 <code>hardware_interface::RobotHW</code>） </p>


<blockquote>
<p>存在问题：部分模块冗余严重，架构过于复杂</p>
</blockquote>
<p>提供了一个硬件抽象层，负责机器人硬件资源的管理。controller 则从中请求资源即可。</p>








<h1 id="hardware-interface"><a href="#hardware-interface" class="headerlink" title="hardware interface"></a>hardware interface</h1><p>机器人的硬件抽象，相当于机器人的软件表示。是 ros_control 和实体机器人沟通的桥梁。hardware interface 的功能包括向实体机器人发送指令；从机器人驱动读取机器人状态。</p>
<p>ros control 中包含了一系列可用的硬件接口（通过硬件资源管理器）。ROS control 将硬件接口与上述的 ROS controllers 之一结合使用，以向硬件发送和接受命令。以下是当前支持的硬件接口：</p>
<ul>
<li><strong>Joint Command Interfaces</strong><ul>
<li>Effort joint interface</li>
<li>Velocity joint interface</li>
<li>Position joint interface</li>
</ul>
</li>
<li><strong>Joint state interfaces</strong></li>
<li><strong>Actuator state interfaces</strong> （执行器&#x2F;驱动器状态接口）</li>
<li><strong>Actuator Command Interfaces</strong><ul>
<li>Effort Actuator Interface</li>
<li>Velocity Actuator Interface</li>
<li>Position Actuator Interface</li>
</ul>
</li>
<li><strong>Force-torque sensor interface</strong> （力 - 扭矩传感器接口）</li>
<li><strong>IMU sensor interface</strong></li>
</ul>
<h1 id="Transmission（传动装置）"><a href="#Transmission（传动装置）" class="headerlink" title="Transmission（传动装置）"></a>Transmission（传动装置）</h1><p>transmissions 是 control pipeline 中的一个元素，转换efforts(力&#x2F;电压等)&#x2F;flow(速度&#x2F;电流等)变量，使产品功率保持不变。</p>
<p>机械传动是功率不变的变换，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">P_in    = P_out </span><br><span class="line">F_in x V_in = F_out x V_out   </span><br></pre></td></tr></table></figure>

<p>P、F、V分别代表 power、force(力度)和速度。power 是effort(如:force&#x2F;voltage) 变量和 flow 变量(如:velocity&#x2F;current)的作用结果。</p>
<p>例如，对于减速比为 n 的简单机械减速器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">effort map: F_joint = F_actuator * n</span><br><span class="line">flow map: V_joint = V_actuator / n</span><br></pre></td></tr></table></figure>

<p><strong>transmission URDF格式</strong></p>
<p><a target="_blank" rel="noopener" href="http://wiki.ros.org/urdf/XML/Transmission">参考</a></p>
<p><strong>transmission接口</strong></p>
<p>Transmission-specific 代码通过一个 transmission 类型共享的通用接口实现双向（actuator &lt;-&gt; joint）effort 和 flow 之间的映射。可用的 transmission 接口：</p>
<ul>
<li>Simple Reduction Transmission（简单减速装置）</li>
<li>Differential Transmission（差分传动）</li>
<li>Four Bar Linkage Transmission（四杆传动）</li>
</ul>
<p>用法：</p>
<ul>
<li><code>transmission_interface::ActuatorToJointStateInterface</code>：通过 actuator 变量设置关节状态</li>
<li><code>hardware_interface::JointStateInterface</code>：将关节状态暴露给控制器</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/ros-controls/ros_control/wiki/transmission_interface">示例</a></p>
<h1 id="关节限制"><a href="#关节限制" class="headerlink" title="关节限制"></a><strong>关节限制</strong></h1><p>joint_limits_interface 包含用于表示关节限制的数据结构、用于从诸如 URDF 和 rosparam 的通用格式填充它们的方法，以及用于对不同类型的关节命令实施限制的方法。</p>
<p>控制器本身不使用 Joint_limits_interface(它不实现 HardwareInterface)，而是在控制器更新之后在机器人抽象的 write()方法（或等效方法）中操作。Enforcing limits 将覆盖控制器下发的指令，它不会在单独的原始数据缓冲区上操作。</p>
<p><strong>说明</strong></p>
<p>①. <strong>Joint limits</strong> Position, velocity, acceleration, jerk and effort.</p>
<p>②. <strong>Soft joint limits</strong> Soft position limits, k_p, k_v (as described in pr2_controller_manager&#x2F;safety_limits).</p>
<p>③. Utility method for loading joint limits information from URDF (only position, velocity, effort)</p>
<p>④. Utility method for loading soft joint limits information from URDF</p>
<p>⑤. Utility method for loading joint limits from ROS parameter server (all values). Parameter specification is the same used in MoveIt, with the addition that we also parse jerk and effort limits.</p>
<p><strong>关节限制接口</strong></p>
<p>①. ros_control 接口用于执行关节限制</p>
<p>②. 对于 effort-controlled joints, position-controlled joints, 以及velocity-controlled joints,创建了两类接口。一类是饱和（saturation）接口，用于有普通限制而没有软限制的关节；另一类是实现了软限制的接口，与PR2中使用的类似。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/ros-controls/ros_control/wiki/joint_limits_interface">示例</a></p>
<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a><strong>示例</strong></h1><ul>
<li><ul>
<li>Barrett WAM controllers at Johns Hopkins University: <a target="_blank" rel="noopener" href="https://github.com/jhu-lcsr/barrett_control">barrett_control on Github</a></li>
<li>RRBot in Gazebo: <a target="_blank" rel="noopener" href="http://gazebosim.org/tutorials/?tut=ros_control">ros_control with Gazebo tutorial</a></li>
<li>Rethink Baxter hardware as used at the University of Colorado Boulder: <a target="_blank" rel="noopener" href="https://github.com/davetcoleman/baxter_cpp/blob/hydro-devel/baxter_control/src/baxter_hardware_interface.cpp">Baxter on Github</a></li>
</ul>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ROS/" rel="tag"># ROS</a>
              <a href="/tags/ros-control/" rel="tag"># ros_control</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/10/16/Robot/ROS/ros_control/joint_trajectory_controller/" rel="prev" title="joint_trajectory_controller">
                  <i class="fa fa-angle-left"></i> joint_trajectory_controller
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/10/17/Robot/ROS/ros_control/hardware_interface/" rel="next" title="hardware_interface">
                  hardware_interface <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Damon</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">523k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">15:50</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
